"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["plugin_listing_filter-rating-select_plugin_js"],{966:(e,t,i)=>{i.d(t,{Z:()=>r});class r{static iterate(e,t){if(e instanceof Map)return e.forEach(t);if(Array.isArray(e))return e.forEach(t);if(!(e instanceof FormData)){if(e instanceof NodeList)return e.forEach(t);if(e instanceof HTMLCollection)return Array.from(e).forEach(t);if(e instanceof Object)return Object.keys(e).forEach((i=>{t(e[i],i)}));throw new Error(`The element type ${typeof e} is not iterable!`)}for(var i of e.entries())t(i[1],i[0])}}},735:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(857),n=i.n(r),s=i(206),o=i(435);class l{constructor(e=document){this._el=e,e.$emitter=this,this._listeners=[]}publish(e,t={},i=!1){const r=new CustomEvent(e,{detail:t,cancelable:i});return this.el.dispatchEvent(r),r}subscribe(e,t,i={}){const r=this,n=e.split(".");let s=i.scope?t.bind(i.scope):t;if(i.once&&!0===i.once){const t=s;s=function(i){r.unsubscribe(e),t(i)}}return this.el.addEventListener(n[0],s),this.listeners.push({splitEventName:n,opts:i,cb:s}),!0}unsubscribe(e){const t=e.split(".");return this.listeners=this.listeners.reduce(((e,i)=>i.splitEventName.sort().toString()===t.sort().toString()?(this.el.removeEventListener(i.splitEventName[0],i.cb),e):(e.push(i),e)),[]),!0}reset(){return this.listeners.forEach((e=>{this.el.removeEventListener(e.splitEventName[0],e.cb)})),this.listeners=[],!0}get el(){return this._el}set el(e){this._el=e}get listeners(){return this._listeners}set listeners(e){this._listeners=e}}class a{constructor(e,t={},i=!1){if(!s.Z.isNode(e))throw new Error("There is no valid element given.");this.el=e,this.$emitter=new l(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}init(){throw new Error(`The "init" method for the plugin "${this._pluginName}" is not defined.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(e){const t=o.Z.toDashCase(this._pluginName),i=s.Z.getDataAttribute(this.el,`data-${t}-config`,!1),r=s.Z.getAttribute(this.el,`data-${t}-options`,!1),l=[this.constructor.options,this.options,e];i&&l.push(window.PluginConfigManager.get(this._pluginName,i));try{r&&l.push(JSON.parse(r))}catch(e){throw console.error(this.el),new Error(`The data attribute "data-${t}-options" could not be parsed to json: ${e.message}`)}return n().all(l.filter((e=>e instanceof Object&&!(e instanceof Array))).map((e=>e||{})))}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this);window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(e){return e||(e=this.constructor.name),e}}},361:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var r,n,s,o=i(206),l=i(966),a=i(735);class c extends a.Z{_init(){super._init(),this._validateMethods();const e=o.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(e,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){const e=o.Z.querySelector(this.el,this.options.dropdownSelector,!1);e&&e.addEventListener("click",(e=>{e.stopPropagation()}))}_validateMethods(){if("function"!=typeof this.getValues)throw new Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw new Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw new Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw new Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}r=c,s={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(n="options"))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s;var u=i(857),h=i.n(u);class p extends c{init(){this.selection=[],this.counter=o.Z.querySelector(this.el,this.options.countSelector),this._registerEvents()}_registerEvents(){const e=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(e,(e=>{e.addEventListener("change",this._onChangeFilter.bind(this))}))}getValues(){const e=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];e?l.Z.iterate(e,(e=>{t.push(e.id)})):t=[],this.selection=t,this._updateCount();const i={};return i[this.options.name]=t,i}getLabels(){const e=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];return e?l.Z.iterate(e,(e=>{t.push({label:e.dataset.label,id:e.id})})):t=[],t}setValuesFromUrl(e={}){let t=!1;const i=e[this.options.name],r=i?i.split("|"):[],n=this.selection.filter((e=>!r.includes(e))),s=r.filter((e=>!this.selection.includes(e)));return(n.length>0||s.length>0)&&(t=!0),s.forEach((e=>{const t=o.Z.querySelector(this.el,`[id="${e}"]`,!1);t&&(t.checked=!0,this.selection.push(t.id))})),n.forEach((e=>{this.reset(e),this.selection=this.selection.filter((t=>t!==e))})),this._updateCount(),t}_onChangeFilter(){this.listing.changeListing(!0,{p:1})}reset(e){const t=o.Z.querySelector(this.el,`[id="${e}"]`,!1);t&&(t.checked=!1)}resetAll(){this.selection.filter=[];const e=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);e&&l.Z.iterate(e,(e=>{e.checked=!1}))}refreshDisabledState(e){const t=e[this.options.name];!t.entities||t.entities.length<1?this.disableFilter():(this.enableFilter(),this._disableInactiveFilterOptions(t.entities.map((e=>e.id))))}_disableInactiveFilterOptions(e){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(t,(t=>{!0!==t.checked&&(e.includes(t.id)?this.enableOption(t):this.disableOption(t))}))}disableOption(e){const t=e.closest(this.options.listItemSelector);t.classList.add("disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText),e.disabled=!0}enableOption(e){const t=e.closest(this.options.listItemSelector);t.removeAttribute("title"),t.classList.remove("disabled"),e.disabled=!1}enableAllOptions(){const e=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(e,(e=>{this.enableOption(e)}))}disableFilter(){const e=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);e.classList.add("disabled"),e.setAttribute("disabled","disabled"),e.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){const e=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);e.classList.remove("disabled"),e.removeAttribute("disabled"),e.removeAttribute("title")}_updateCount(){this.counter.innerText=this.selection.length?`(${this.selection.length})`:""}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(p,"options",h()(c.options,{checkboxSelector:".filter-multi-select-checkbox",countSelector:".filter-multi-select-count",listItemSelector:".filter-multi-select-list-item",snippets:{disabledFilterText:"Filter not active"},mainFilterButtonSelector:".filter-panel-item-toggle"}));class d extends p{getValues(){const e={},t=o.Z.querySelector(this.el,`${this.options.checkboxSelector}:checked`,!1);return this.currentRating=t.value,this._updateCount(),e[this.options.name]=this.currentRating?this.currentRating.toString():"",e}setValuesFromUrl(e){let t=!1;return Object.keys(e).forEach((i=>{if(i===this.options.name){this.currentRating=e[i],this._updateCount();const r=o.Z.querySelectorAll(this.el,this.options.checkboxSelector,!1);r&&l.Z.iterate(r,(e=>{e.value===this.currentRating&&(e.checked=!0)})),t=!0}})),t}getLabels(){const e=o.Z.querySelector(this.el,this.options.checkboxSelector+":checked",!1).value;let t=[];if(e){let i=this.options.snippets.filterRatingActiveLabelEnd;1===parseInt(e)&&(i=this.options.snippets.filterRatingActiveLabelEndSingular),t.push({label:`${this.options.snippets.filterRatingActiveLabelStart}\n                        ${e}/${this.options.maxPoints}\n                        ${i}`,id:"rating"})}else t=[];return t}refreshDisabledState(e){const t=e[this.options.name].max;if(t&&t>0)return this.enableFilter(),void this._disableInactiveFilterOptions(t);this.disableFilter()}_disableInactiveFilterOptions(e){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(t,(t=>{!0!==t.checked&&(e>=t.value?this.enableOption(t):this.disableOption(t))}))}reset(){this.resetAll()}_updateCount(){this.counter.innerText=this.currentRating?`(${this.currentRating}/${this.options.maxPoints})`:""}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(d,"options",h()(p.options,{maxPoints:5,snippets:{filterRatingActiveLabelStart:"Minimum",filterRatingActiveLabelEndSingular:"star",filterRatingActiveLabelEnd:"stars",disabledFilterText:"Filter not active"}}))},857:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function n(e,t,i){return e.concat(t).map((function(e){return r(e,i)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function l(e,t,i){var n={};return i.isMergeableObject(e)&&s(e).forEach((function(t){n[t]=r(e[t],i)})),s(t).forEach((function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(o(e,s)&&i.isMergeableObject(t[s])?n[s]=function(e,t){if(!t.customMerge)return a;var i=t.customMerge(e);return"function"==typeof i?i:a}(s,i)(e[s],t[s],i):n[s]=r(t[s],i))})),n}function a(e,i,s){(s=s||{}).arrayMerge=s.arrayMerge||n,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=r;var o=Array.isArray(i);return o===Array.isArray(e)?o?s.arrayMerge(e,i,s):l(e,i,s):r(i,s)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return a(e,i,t)}),{})};var c=a;e.exports=c}}]);