{% sw_extends '@Storefront/storefront/page/checkout/address/index.html.twig' %}

{% block page_checkout_address_login_toggle %}
    <div class="register-login-header">
        <h6>{{ "checkout.welcome"|trans|sw_sanitize }}</h6>
        <p>{{ "checkout.welcomeText"|trans|sw_sanitize }}</p>
        <div class="register-login-collapse-toogle">
            <a href="#loginCollapse"
               class="login-collapse-toggle"
               data-bs-toggle="collapse"
               aria-expanded="false">
                <strong>{{ "checkout.addressLoginToggle"|trans|sw_sanitize }}</strong></a>
        </div>
    </div>

    {# Call Paypal logo to checkout address login again #}
    {# @var \Swag\PayPal\Checkout\ExpressCheckout\ExpressCheckoutButtonData expressSettings #}
    {% set expressSettings = page.extensions[constant('Swag\\PayPal\\Checkout\\ExpressCheckout\\ExpressCheckoutSubscriber::PAYPAL_EXPRESS_CHECKOUT_BUTTON_DATA_EXTENSION_ID')] %}
    {% set expressEnabled = expressSettings.loginEnabled %}

    {# @var \Swag\PayPal\Installment\Banner\BannerData installmentBanner #}
    {% set installmentBanner = page.extensions[constant('Swag\\PayPal\\Installment\\Banner\\InstallmentBannerSubscriber::PAYPAL_INSTALLMENT_BANNER_DATA_EXTENSION_ID')] %}
    {% set installmentBannerEnabled = installmentBanner is not null %}

    {% if expressEnabled or installmentBannerEnabled %}
        <div class="row mb-2">
            {% if expressEnabled %}
                {% sw_include '@SwagPayPal/storefront/component/ecs-spb-checkout/ecs-button.html.twig' ignore missing with {button_class: 'col-5'} %}
            {% endif %}

            {% if installmentBannerEnabled %}
                <div class="col-5 mt-2"
                     data-swag-paypal-installment-banner="true"
                     data-swag-pay-pal-installment-banner-options="{{ installmentBanner|json_encode }}">
                </div>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}

{% block page_checkout_address %}
    {{ block('page_checkout_address_header') }}

    {{ block('page_checkout_address_login_toggle') }}

    {{ block('page_checkout_address_login') }}

    {% if block('page_checkout_address_login_swag_amazon_pay_card') is defined %}
        {{ block('page_checkout_address_login_swag_amazon_pay_card') }}
    {% endif %}

    {{ block('page_checkout_address_register') }}
{% endblock %}

